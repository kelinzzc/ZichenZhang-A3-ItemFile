<div class="events-page" ng-controller="EventsController as vm">
    <!-- Page title and actions -->
    <div class="page-header">
        <div class="header-left">
            <h1>Event Management</h1>
            <p>Manage all charity events</p>
        </div>
        <div class="header-right">
            <button class="btn btn-primary" ng-click="vm.createEvent()">
                <i class="fas fa-plus"></i>
                Create New Event
            </button>
        </div>
    </div>

    <!-- Search and filter -->
    <div class="search-section">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" 
                   ng-model="vm.searchQuery" 
                   ng-change="vm.searchEvents()"
                   placeholder="Search event name, description, or location...">
        </div>
    </div>

    <!-- Loading state -->
    <div ng-if="vm.isLoading" class="loading-state">
        <div class="spinner"></div>
        <p>Loading events...</p>
    </div>

    <!-- Events list -->
    <div ng-if="!vm.isLoading" class="content-section">
        <div class="card">
            <div class="card-body">
                <!-- Data table -->
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Event Name</th>
                            <th>Category</th>
                            <th>Date</th>
                            <th>Location</th>
                            <th>Status</th>
                            <th>Registrations</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="event in vm.filteredEvents | 
                                      limitTo: vm.pagination.itemsPerPage : 
                                      (vm.pagination.currentPage - 1) * vm.pagination.itemsPerPage">
                            <td>
                                <strong>{{event.title}}</strong>
                                <div class="text-muted small">{{event.description}}</div>
                            </td>
                            <td>{{event.category_name}}</td>
                            <td>{{vm.formatDate(event.event_date)}}</td>
                            <td>{{event.location}}</td>
                            <td>
                                <span class="status-badge" 
                                      ng-class="vm.getEventStatus(event).class">
                                    {{vm.getEventStatus(event).text}}
                                </span>
                            </td>
                            <td>
                                {{event.total_tickets_sold || 0}} / {{event.max_attendees}}
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn btn-sm btn-info" 
                                            ng-click="vm.viewEvent(event)"
                                            title="View details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" 
                                            ng-click="vm.editEvent(event)"
                                            title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" 
                                            ng-click="vm.deleteEvent(event)"
                                            title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Empty state -->
                <div ng-if="vm.filteredEvents.length === 0" class="empty-state">
                    <i class="fas fa-calendar-times"></i>
                    <h3>No Events</h3>
                    <p>No events created yet, click "Create New Event" to start adding</p>
                    <button class="btn btn-primary" ng-click="vm.createEvent()">
                        Create New Event
                    </button>
                </div>

                <!-- Pagination -->
                <div ng-if="vm.filteredEvents.length > 0" class="pagination">
                    <div class="pagination-info">
                        Showing {{(vm.pagination.currentPage - 1) * vm.pagination.itemsPerPage + 1}} 
                        to {{Math.min(vm.pagination.currentPage * vm.pagination.itemsPerPage, vm.pagination.totalItems)}} 
                        of {{vm.pagination.totalItems}} records
                    </div>
                    <div class="pagination-controls">
                        <button class="btn btn-sm" 
                                ng-disabled="vm.pagination.currentPage === 1"
                                ng-click="vm.pagination.currentPage = vm.pagination.currentPage - 1">
                            Previous
                        </button>
                        <span class="page-numbers">
                            Page {{vm.pagination.currentPage}}
                        </span>
                        <button class="btn btn-sm"
                                ng-disabled="vm.pagination.currentPage * vm.pagination.itemsPerPage >= vm.pagination.totalItems"
                                ng-click="vm.pagination.currentPage = vm.pagination.currentPage + 1">
                            Next
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>