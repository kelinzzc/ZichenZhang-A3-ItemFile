<div class="event-form-page" ng-controller="EventFormController as vm">
    <!-- Page title -->
    <div class="page-header">
        <h1>{{vm.isEdit ? 'Edit Event' : 'Create New Event'}}</h1>
        <p>{{vm.isEdit ? 'Modify event information' : 'Add new charity event'}}</p>
    </div>

    <!-- Loading state -->
    <div ng-if="vm.isLoading" class="loading-state">
        <div class="spinner"></div>
        <p>Loading event data...</p>
    </div>

    <!-- Form content -->
    <div ng-if="!vm.isLoading" class="content-section">
        <div class="card">
            <div class="card-body">
                <!-- Validation errors -->
                <div ng-if="vm.validationErrors.length > 0" class="alert alert-error">
                    <h4>Please correct the following errors:</h4>
                    <ul>
                        <li ng-repeat="error in vm.validationErrors">{{error}}</li>
                    </ul>
                </div>

                <form name="eventForm" ng-submit="vm.submitForm()" novalidate>
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h3>Basic Information</h3>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Event Title *</label>
                                    <input type="text" 
                                           class="form-control"
                                           ng-model="vm.event.title"
                                           placeholder="Enter event title"
                                           required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Event Category</label>
                                    <select class="form-control" ng-model="vm.event.category_id">
                                        <option value="">Please select category</option>
                                        <option ng-repeat="category in vm.categories" 
                                                value="{{category.id}}">
                                            {{category.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Event Description *</label>
                            <textarea class="form-control"
                                      ng-model="vm.event.description"
                                      placeholder="Enter brief event description"
                                      rows="3"
                                      required></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Full Description</label>
                            <textarea class="form-control"
                                      ng-model="vm.event.full_description"
                                      placeholder="Enter detailed event description"
                                      rows="5"></textarea>
                        </div>
                    </div>

                    <!-- Time and Location -->
                    <div class="form-section">
                        <h3>Time and Location</h3>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Event Date *</label>
                                    <input type="datetime-local"
                                           class="form-control"
                                           ng-model="vm.event.event_date"
                                           required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Event Location *</label>
                                    <input type="text"
                                           class="form-control"
                                           ng-model="vm.event.location"
                                           placeholder="Enter event location"
                                           required>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Venue Details</label>
                            <input type="text"
                                   class="form-control"
                                   ng-model="vm.event.venue_details"
                                   placeholder="Enter specific venue information (room number, floor, etc.)">
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Latitude</label>
                                    <input type="number"
                                           class="form-control"
                                           ng-model="vm.event.latitude"
                                           placeholder="e.g., -33.87"
                                           step="any">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Longitude</label>
                                    <input type="number"
                                           class="form-control"
                                           ng-model="vm.event.longitude"
                                           placeholder="e.g., 151.21"
                                           step="any">
                                </div>
                            </div>
                        </div>
                        <button type="button" class="btn btn-outline btn-sm" ng-click="vm.setCurrentLocation()">
                            <i class="fas fa-map-marker-alt"></i>
                            Use Example Coordinates
                        </button>
                    </div>

                    <!-- Ticketing and Fundraising -->
                    <div class="form-section">
                        <h3>Ticketing and Fundraising</h3>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Maximum Attendees *</label>
                                    <input type="number"
                                           class="form-control"
                                           ng-model="vm.event.max_attendees"
                                           min="1"
                                           required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Ticket Price (¥)</label>
                                    <input type="number"
                                           class="form-control"
                                           ng-model="vm.event.ticket_price"
                                           min="0"
                                           step="0.01">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Fundraising Goal (¥)</label>
                                    <input type="number"
                                           class="form-control"
                                           ng-model="vm.event.goal_amount"
                                           min="0"
                                           step="0.01">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Status Settings -->
                    <div class="form-section">
                        <h3>Status Settings</h3>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input type="checkbox"
                                           class="form-check-input"
                                           ng-model="vm.event.is_active"
                                           id="isActive">
                                    <label class="form-check-label" for="isActive">
                                        Event Active
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input type="checkbox"
                                           class="form-check-input"
                                           ng-model="vm.event.is_suspended"
                                           id="isSuspended">
                                    <label class="form-check-label" for="isSuspended">
                                        Event Suspended
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="submit"
                                class="btn btn-primary btn-lg"
                                ng-disabled="vm.isSubmitting">
                            <span ng-if="!vm.isSubmitting">
                                <i class="fas fa-check"></i>
                                {{vm.isEdit ? 'Update Event' : 'Create Event'}}
                            </span>
                            <span ng-if="vm.isSubmitting">
                                <div class="spinner-sm"></div>
                                Submitting...
                            </span>
                        </button>
                        <button type="button"
                                class="btn btn-outline btn-lg"
                                ng-click="vm.cancel()">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>