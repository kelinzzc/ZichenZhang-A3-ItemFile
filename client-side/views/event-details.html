<div class="container" ng-if="!loading && event">
    <div class="event-detail-header">
        <div class="event-image-large">
            <img ng-src="{{event.image_url || 'images/events/default.jpg'}}" alt="{{event.title}}">
        </div>
        <div class="event-header-content">
            <h1 class="event-title">{{event.title}}</h1>
            <p class="event-description">{{event.description}}</p>
            
            <div class="event-meta-large">
                <div class="meta-item">
                    <i class="icon-calendar"></i>
                    <span>{{event.event_date | dateFormat:'long'}}</span>
                </div>
                <div class="meta-item">
                    <i class="icon-location"></i>
                    <span>{{event.location}}</span>
                </div>
                <div class="meta-item">
                    <i class="icon-organization"></i>
                    <span>{{event.organization_name}}</span>
                </div>
                <div class="meta-item">
                    <i class="icon-category"></i>
                    <span>{{event.category_name}}</span>
                </div>
            </div>
            
            <div class="event-stats">
                <div class="stat">
                    <div class="stat-value">{{event.current_amount | currency:'$':0}}</div>
                    <div class="stat-label">Raised Amount</div>
                </div>
                <div class="stat">
                    <div class="stat-value">{{event.goal_amount | currency:'$':0}}</div>
                    <div class="stat-label">Goal Amount</div>
                </div>
                <div class="stat">
                    <div class="stat-value">{{event.registration_count || 0}}</div>
                    <div class="stat-label">Registrations</div>
                </div>
                <div class="stat">
                    <div class="stat-value">{{event.available_tickets || 0}}</div>
                    <div class="stat-label">Available Tickets</div>
                </div>
            </div>
            
            <div class="progress-container-large">
                <div class="progress-bar">
                    <div class="progress-fill" ng-style="{'width': calculateProgress() + '%'}"></div>
                </div>
                <div class="progress-text">
                    <span>Fundraising Progress: {{calculateProgress() | number:1}}%</span>
                </div>
            </div>
            
            <div class="event-actions-large">
                <a href="#!/register/{{event.id}}" class="btn btn-primary btn-large" 
                   ng-if="isUpcoming() && hasAvailableTickets()">
                    Register Now
                </a>
                <button class="btn btn-secondary btn-large" disabled ng-if="!isUpcoming()">
                    Event Ended
                </button>
                <button class="btn btn-secondary btn-large" disabled ng-if="isUpcoming() && !hasAvailableTickets()">
                    Sold Out
                </button>
            </div>
        </div>
    </div>
    
    <div class="event-detail-content">
        <div class="content-section">
            <h2>Event Details</h2>
            <div class="event-full-description" ng-bind-html="event.full_description"></div>
        </div>
        
        <div class="content-section" ng-if="event.venue_details">
            <h2>Venue Information</h2>
            <p>{{event.venue_details}}</p>
        </div>
        
        <div class="content-section" ng-if="registrations.length > 0">
            <h2>Registration Records</h2>
            <div class="registrations-list">
                <div class="registration-item" ng-repeat="registration in registrations">
                    <div class="registration-info">
                        <div class="registrant-name">{{registration.full_name}}</div>
                        <div class="registrant-email">{{registration.email}}</div>
                        <div class="registration-meta">
                            <span>Tickets: {{registration.ticket_count}}</span>
                            <span>Registration Time: {{registration.registration_date | dateFormat:'short'}}</span>
                        </div>
                        <div class="special-requirements" ng-if="registration.special_requirements">
                            Special Requirements: {{registration.special_requirements}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container" ng-if="loading">
    <div class="loading-spinner">Loading event details...</div>
</div>

<div class="container" ng-if="!loading && error">
    <div class="error-message">{{error}}</div>
</div>

<div class="container" ng-if="!loading && !event && !error">
    <div class="error-message">Event does not exist</div>
</div>