<div class="container">
    <div class="page-header">
        <h1>Search Events</h1>
        <p>Find events you're interested in by keywords, categories, location, and other criteria</p>
    </div>

    <!-- Search Form -->
    <div class="search-form-section">
        <form name="searchForm" class="search-form">
            <div class="form-row">
                <div class="form-group full-width">
                    <label for="searchQuery" class="form-label">Keyword Search</label>
                    <input type="text" id="searchQuery" class="form-control" 
                           ng-model="searchParams.q"
                           placeholder="Enter event name, description, or location...">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="searchCategory" class="form-label">Event Category</label>
                    <select id="searchCategory" class="form-control" ng-model="searchParams.category">
                        <option value="">All Categories</option>
                        <option ng-repeat="category in categories" value="{{category.id}}">{{category.name}}</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="searchLocation" class="form-label">Location</label>
                    <input type="text" id="searchLocation" class="form-control" 
                           ng-model="searchParams.location"
                           placeholder="Enter event location...">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="dateFrom" class="form-label">Start Date</label>
                    <input type="date" id="dateFrom" class="form-control" ng-model="searchParams.date_from">
                </div>
                
                <div class="form-group">
                    <label for="dateTo" class="form-label">End Date</label>
                    <input type="date" id="dateTo" class="form-control" ng-model="searchParams.date_to">
                </div>
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn btn-primary" ng-click="performSearch()" ng-disabled="loading">
                    {{loading ? 'Searching...' : 'Search'}}
                </button>
                <button type="button" class="btn btn-outline" ng-click="clearSearch()">Clear</button>
            </div>
        </form>
    </div>

    <!-- Search Results -->
    <div class="search-results-section" ng-if="searchPerformed">
        <h2>Search Results</h2>
        
        <div class="search-summary" ng-if="!loading">
            <p>Found {{events.length}} matching events</p>
        </div>
        
        <div class="events-grid">
            <div ng-repeat="event in events" class="event-card">
                <div class="event-image-container">
                    <img ng-src="{{event.image_url || 'images/events/default.jpg'}}" alt="{{event.title}}" class="event-image">
                    <div class="event-status" ng-class="{'upcoming': isUpcoming(event), 'past': isPast(event)}">
                        {{isUpcoming(event) ? 'Upcoming' : (isPast(event) ? 'Ended' : 'In Progress')}}
                    </div>
                </div>
                <div class="event-content">
                    <h3 class="event-title">{{event.title}}</h3>
                    <p class="event-description">{{event.description | truncate:100}}</p>
                    
                    <div class="event-meta">
                        <div class="event-date">
                            <i class="icon-calendar"></i>
                            {{event.event_date | dateFormat:'short'}}
                        </div>
                        <div class="event-location">
                            <i class="icon-location"></i>
                            {{event.location}}
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" ng-style="{'width': calculateProgress(event) + '%'}"></div>
                        </div>
                        <div class="progress-text">
                            <span>Raised {{event.current_amount | currency:'$':0}}</span>
                            <span>Goal {{event.goal_amount | currency:'$':0}}</span>
                        </div>
                    </div>
                    
                    <div class="event-actions">
                        <a href="#!/events/{{event.id}}" class="btn btn-outline">View Details</a>
                        <a href="#!/register/{{event.id}}" class="btn btn-primary" ng-if="isUpcoming(event) && event.available_tickets > 0">Register Now</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="loading-spinner" ng-if="loading">
            Searching for events...
        </div>
        
        <div class="error-message" ng-if="error">
            {{error}}
        </div>
        
        <div class="no-results" ng-if="!loading && events.length === 0 && searchPerformed">
            <p>No matching events found, please try adjusting your search criteria</p>
        </div>
    </div>
</div>