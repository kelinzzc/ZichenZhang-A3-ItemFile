<div class="container">
    <div class="page-header">
        <h1>Event Registration</h1>
        <p>Fill in information to complete event registration</p>
    </div>

    <div class="register-container" ng-if="!loading && event">
        <div class="register-form-section">
            <h2>Registration Information</h2>
            
            <form name="registrationForm" novalidate>
                <div class="form-group">
                    <label for="fullName" class="form-label">Full Name *</label>
                    <input type="text" id="fullName" class="form-control" 
                           ng-model="registration.full_name" 
                           required
                           ng-class="{'error': registrationForm.fullName.$invalid && registrationForm.fullName.$touched}">
                    <div class="form-error" ng-if="registrationForm.fullName.$invalid && registrationForm.fullName.$touched">
                        Please enter your full name
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="form-label">Email *</label>
                    <input type="email" id="email" class="form-control" 
                           ng-model="registration.email" 
                           required
                           ng-class="{'error': registrationForm.email.$invalid && registrationForm.email.$touched}">
                    <div class="form-error" ng-if="registrationForm.email.$invalid && registrationForm.email.$touched">
                        Please enter a valid email address
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="phone" class="form-label">Phone</label>
                    <input type="tel" id="phone" class="form-control" ng-model="registration.phone">
                </div>
                
                <div class="form-group">
                    <label for="ticketCount" class="form-label">Number of Tickets *</label>
                    <select id="ticketCount" class="form-control" 
                            ng-model="registration.ticket_count"
                            ng-options="n for n in [] | range:1:event.available_tickets"
                            required>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="specialRequirements" class="form-label">Special Requirements</label>
                    <textarea id="specialRequirements" class="form-control" 
                              ng-model="registration.special_requirements"
                              rows="3"
                              placeholder="If you have any special requirements (such as dietary restrictions, accessibility needs, etc.), please describe here"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-primary btn-large" 
                            ng-click="submitRegistration()"
                            ng-disabled="registrationForm.$invalid || submitting || !hasAvailableTickets()">
                        {{submitting ? 'Submitting...' : 'Confirm Registration'}}
                    </button>
                    <a href="#!/events/{{event.id}}" class="btn btn-outline">Cancel</a>
                </div>
            </form>
            
            <div class="error-message" ng-if="error">
                {{error}}
            </div>
            
            <div class="success-message" ng-if="success">
                <h3>Registration Successful!</h3>
                <p>Thank you for your registration, we have received your application.</p>
                <p>Redirecting to event details page in 3 seconds...</p>
            </div>
        </div>
        
        <div class="event-summary-section">
            <h2>Event Information</h2>
            <div class="event-summary-card">
                <img ng-src="{{event.image_url || 'images/events/default.jpg'}}" alt="{{event.title}}">
                <h3>{{event.title}}</h3>
                <p class="event-date">{{event.event_date | dateFormat:'long'}}</p>
                <p class="event-location">{{event.location}}</p>
                
                <div class="ticket-info">
                    <div class="ticket-price">
                        Ticket Price: {{event.ticket_price | currency:'$':2}}
                    </div>
                    <div class="ticket-total">
                        Total Amount: {{calculateTotal() | currency:'$':2}}
                    </div>
                    <div class="available-tickets" ng-class="{'low': event.available_tickets < 10}">
                        Available Tickets: {{event.available_tickets}}
                    </div>
                </div>
                
                <div class="organization-info">
                    <h4>Organizer</h4>
                    <p>{{event.organization_name}}</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="loading-spinner" ng-if="loading">
        Loading event information...
    </div>
    
    <div class="error-message" ng-if="!loading && !event">
        Event does not exist or cannot be loaded
    </div>
</div>