<div class="home-page" ng-controller="HomeController as vm">
    <!-- 英雄区域 -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">让爱心传递，让希望延续</h1>
                <p class="hero-description">
                    加入我们的慈善活动平台，参与有意义的活动，为需要帮助的人们带来希望和改变。
                </p>
                <div class="hero-actions">
                    <a href="/events" class="btn btn-primary btn-lg">
                        <i class="fas fa-calendar-alt"></i>
                        浏览活动
                    </a>
                    <a href="/search" class="btn btn-outline btn-lg">
                        <i class="fas fa-search"></i>
                        搜索活动
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 统计区域 -->
    <section class="stats-section section">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h3 class="stat-number">{{vm.formatNumber(vm.stats.total_events)}}</h3>
                        <p class="stat-label">总活动数</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="stat-number">{{vm.formatNumber(vm.stats.active_events)}}</h3>
                        <p class="stat-label">进行中活动</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <h3 class="stat-number">{{vm.formatNumber(vm.stats.total_raised)}}</h3>
                        <p class="stat-label">已筹金额</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon">
                            <i class="fas fa-target"></i>
                        </div>
                        <h3 class="stat-number">{{vm.calculateProgress(vm.stats.total_raised, vm.stats.total_goal)}}%</h3>
                        <p class="stat-label">目标进度</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 推荐活动 -->
    <section class="featured-events section">
        <div class="container">
            <h2 class="section-title">推荐活动</h2>
            
            <div ng-if="vm.isLoading" class="text-center">
                <div class="spinner"></div>
                <p>加载推荐活动中...</p>
            </div>
            
            <div ng-if="!vm.isLoading && vm.featuredEvents.length === 0" class="text-center">
                <p>暂无推荐活动</p>
                <a href="/events" class="btn btn-primary mt-3">浏览所有活动</a>
            </div>
            
            <div class="row" ng-if="!vm.isLoading && vm.featuredEvents.length > 0">
                <div class="col-lg-4 col-md-6" ng-repeat="event in vm.featuredEvents">
                    <div class="event-card card">
                        <div class="event-image">
                            <img ng-src="{{event.image_url || 'assets/images/event-default.jpg'}}" alt="{{event.title}}">
                            <div class="event-category">{{event.category_name}}</div>
                        </div>
                        
                        <div class="card-body">
                            <h3 class="event-title">{{event.title}}</h3>
                            <p class="event-description">{{event.description}}</p>
                            
                            <div class="event-meta">
                                <div class="meta-item">
                                    <i class="fas fa-calendar"></i>
                                    {{$root.formatDate(event.event_date)}}
                                </div>
                                <div class="meta-item">
                                    <i class="fas fa-map-marker-alt"></i>
                                    {{event.location}}
                                </div>
                                <div class="meta-item">
                                    <i class="fas fa-ticket-alt"></i>
                                    剩余 {{event.max_attendees - (event.total_tickets_sold || 0)}} 张票
                                </div>
                            </div>
                            
                            <div class="event-progress">
                                <div class="progress-info">
                                    <span>筹款进度</span>
                                    <span>{{$root.calculateProgress(event.current_amount, event.goal_amount)}}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" 
                                         ng-style="{width: $root.calculateProgress(event.current_amount, event.goal_amount) + '%'}"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-footer">
                            <div class="event-price">
                                <span class="price" ng-if="event.ticket_price > 0">
                                    {{$root.formatCurrency(event.ticket_price)}}
                                </span>
                                <span class="price free" ng-if="event.ticket_price === 0">
                                    免费
                                </span>
                            </div>
                            <a ng-href="/events/{{event.id}}" class="btn btn-primary btn-sm">
                                查看详情
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-4" ng-if="!vm.isLoading && vm.featuredEvents.length > 0">
                <a href="/events" class="btn btn-outline">
                    <i class="fas fa-list"></i>
                    查看所有活动
                </a>
            </div>
        </div>
    </section>

    <!-- 号召行动区域 -->
    <section class="cta-section section">
        <div class="container">
            <div class="cta-content text-center">
                <h2>准备好改变世界了吗？</h2>
                <p>加入我们，参与慈善活动，为需要帮助的人们带来希望</p>
                <div class="cta-actions">
                    <a href="/events" class="btn btn-primary btn-lg">
                        <i class="fas fa-rocket"></i>
                        立即参与
                    </a>
                </div>
            </div>
        </div>
    </section>
</div>