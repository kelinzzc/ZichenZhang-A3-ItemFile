<div class="container">
    <div class="page-header">
        <h1>All Events</h1>
        <p>Discover and participate in charity events that interest you</p>
    </div>

    <!-- Filters -->
    <div class="filters-section">
        <div class="filter-group">
            <label for="category-filter">Category:</label>
            <select id="category-filter" class="filter-select" ng-model="filters.category">
                <option value="">All Categories</option>
                <option ng-repeat="category in categories" value="{{category.id}}">{{category.name}}</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="location-filter">Location:</label>
            <input type="text" id="location-filter" class="filter-input" placeholder="Enter location..." ng-model="filters.location">
        </div>
        <div class="filter-group">
            <label for="date-filter">Date:</label>
            <select id="date-filter" class="filter-select" ng-model="filters.date">
                <option value="">All Dates</option>
                <option value="upcoming">Upcoming</option>
                <option value="this-week">This Week</option>
                <option value="this-month">This Month</option>
            </select>
        </div>
        <button class="btn btn-primary" ng-click="applyFilters()">Apply Filters</button>
        <button class="btn btn-outline" ng-click="clearFilters()">Clear Filters</button>
    </div>

    <!-- Events Table -->
    <div class="events-container">
        <div class="events-grid">
            <div ng-repeat="event in events" class="event-card">
                <div class="event-image-container">
                    <img ng-src="{{event.image_url || 'images/events/default.jpg'}}" alt="{{event.title}}" class="event-image">
                    <div class="event-status" ng-class="{'upcoming': isUpcoming(event), 'past': isPast(event)}">
                        {{isUpcoming(event) ? 'Upcoming' : (isPast(event) ? 'Ended' : 'In Progress')}}
                    </div>
                </div>
                <div class="event-content">
                    <h3 class="event-title">{{event.title}}</h3>
                    <p class="event-description">{{event.description | truncate:100}}</p>
                    
                    <div class="event-meta">
                        <div class="event-date">
                            <i class="icon-calendar"></i>
                            {{event.event_date | dateFormat:'short'}}
                        </div>
                        <div class="event-location">
                            <i class="icon-location"></i>
                            {{event.location}}
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" ng-style="{'width': calculateProgress(event) + '%'}"></div>
                        </div>
                        <div class="progress-text">
                            <span>Raised {{event.current_amount | currency:'$':0}}</span>
                            <span>Goal {{event.goal_amount | currency:'$':0}}</span>
                        </div>
                    </div>
                    
                    <div class="event-actions">
                        <a href="#!/events/{{event.id}}" class="btn btn-outline">View Details</a>
                        <a href="#!/register/{{event.id}}" class="btn btn-primary" ng-if="isUpcoming(event) && event.available_tickets > 0">Register Now</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="loading-spinner" ng-if="loading">
            Loading events...
        </div>
        
        <div class="error-message" ng-if="error">
            {{error}}
        </div>
        
        <div class="no-results" ng-if="!loading && events.length === 0">
            <p>No matching events found</p>
        </div>
        
        <!-- Pagination -->
        <div class="pagination" ng-if="pagination.totalItems > pagination.itemsPerPage">
            <button class="btn btn-outline" ng-disabled="pagination.currentPage === 1" 
                    ng-click="pagination.currentPage = pagination.currentPage - 1; pageChanged()">
                Previous
            </button>
            <span class="pagination-info">
                Page {{pagination.currentPage}} of {{Math.ceil(pagination.totalItems / pagination.itemsPerPage)}}
            </span>
            <button class="btn btn-outline" 
                    ng-disabled="pagination.currentPage * pagination.itemsPerPage >= pagination.totalItems"
                    ng-click="pagination.currentPage = pagination.currentPage + 1; pageChanged()">
                Next
            </button>
        </div>
    </div>
</div>